<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sri Lanka Stay & Explore</title>
    <meta name="description" content="Discover the best accommodations and experiences in Sri Lanka with our curated selection of hotels, villas, and local adventures.">
    <meta name="keywords" content="Sri Lanka, accommodations, hotels, travel, transport, tours, vacation">
    <meta name="author" content="Sri Lanka Stay & Explore">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sri-lanka-stay-explore.netlify.app/">
    <meta property="og:title" content="Sri Lanka Stay & Explore">
    <meta property="og:description" content="Discover the best accommodations and experiences in Sri Lanka with our curated selection of hotels, villas, and local adventures.">
    <meta property="og:image" content="https://sri-lanka-stay-explore.netlify.app/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://sri-lanka-stay-explore.netlify.app/">
    <meta property="twitter:title" content="Sri Lanka Stay & Explore">
    <meta property="twitter:description" content="Discover the best accommodations and experiences in Sri Lanka with our curated selection of hotels, villas, and local adventures.">
    <meta property="twitter:image" content="https://sri-lanka-stay-explore.netlify.app/images/og-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/ranga_bandara_logo_v2.png">
    <!-- Additional favicon formats for better browser compatibility -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    
    <!-- Critical CSS for scrolling fixes - Load this first -->
    <link rel="stylesheet" href="css/scroll-fix.css">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/gallery-fix.css">
    <link rel="stylesheet" href="css/mobile-optimize.css">
    <link rel="stylesheet" href="css/mobile-fix.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <!-- Leaflet CSS for maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    
    <!-- JavaScript -->
    <script src="js/translations.js"></script>
    <script src="js/indexed-db.js"></script>
    <script src="js/image-manager.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
      // Check if service worker is supported
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/js/service-worker.js')
            .then(registration => {
              console.log('Service Worker registered successfully:', registration.scope);
            })
            .catch(error => {
              console.error('Service Worker registration failed:', error);
            });
        });
      }
    </script>

    <!-- 结构化数据用于SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TravelAgency",
      "name": "Sri Lanka Stay & Explore",
      "url": "https://sri-lanka-stay-explore.netlify.app/",
      "logo": "https://sri-lanka-stay-explore.netlify.app/images/ranga_bandara_logo_v2.png",
      "description": "Your premium travel experience in Sri Lanka. We offer transport services, accommodation booking and guided tours.",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "Sri Lanka",
        "addressLocality": "Colombo"
      },
      "telephone": "+94 77 760 5921",
      "email": "info@srilankastayexplore.com",
      "sameAs": [
        "https://www.facebook.com/srilankastayexplore",
        "https://www.instagram.com/srilankastayexplore"
      ]
    }
    </script>

    <!-- Google Analytics -->
    <script src="js/analytics.js" defer></script>

    <!-- Cloudflare Web Analytics -->
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "XXXXXXXXXX"}'></script>

    <!-- Leaflet CSS -->
    <!-- 重复加载，已移除 -->

    <!-- User Authentication Script -->
    <script src="js/user-auth.js" defer></script>
    
    <!-- My Bookings Script -->
    <script src="js/my-bookings.js" defer></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <style>
    /* Ensure My Bookings nav item aligns with other menu items */
    #myBookingsNavItem {
        display: none; /* Initially hidden, will show on login */
        vertical-align: middle;
    }
    
    #myBookingsNavItem a {
        color: var(--light-text);
        text-decoration: none;
        font-weight: 300;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        line-height: normal;
        display: inline-flex;
        align-items: center;
    }
    
    #myBookingsNavItem a:hover {
        color: var(--accent-color);
    }
    
    /* Ensure consistent alignment in the navigation */
    .nav-links li {
        display: inline-flex;
        align-items: center;
    }
    
    .nav-links li a {
        display: inline-flex;
        align-items: center;
    }
    
    /* Ensure the nav login button aligns properly */
    .nav-login-btn {
        display: inline-flex !important;
        align-items: center;
    }
    </style>
</head>
<body class="force-scroll">
    <header>
        <nav class="main-nav">
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#transport">Transport</a></li>
                <li><a href="#explore">Explore</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="#" id="authToggleBtn" class="nav-login-btn"><i class="fas fa-user"></i> <span id="authBtnText">Login</span></a></li>
                <li id="myBookingsNavItem"><a href="#" id="navMyBookingsBtn"><i class="fas fa-receipt"></i> My Bookings</a></li>
            </ul>
            <div class="logo">
                <a href="#home">
                    <img src="./images/ranga_bandara_logo_v2.png" alt="Ranga Bandara Logo" id="site-logo">
                </a>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-content">
                <h2 class="fade-in" data-i18n="hero-title">Best Travel - Best Choice</h2>
                <p class="fade-in" data-i18n="hero-subtitle">Your premium travel experience in Sri Lanka</p>
                <div class="hero-buttons">
                    <a href="#transport" class="btn fade-in" data-i18n="book-transport">Book Transport</a>
                    <a href="#explore" class="btn-secondary fade-in" data-i18n="explore-lanka">Explore Sri Lanka</a>
                </div>
            </div>
        </section>

        <!-- Transport Section -->
        <section id="transport" class="section">
            <div class="container">
                <h2 class="section-title" data-i18n="transport-services">Transport Services</h2>
                <div class="transport-booking-grid">
                    <!-- 左侧：服务展示-->
                    <div class="transport-info">
                        <div class="transport-card">
                            <img src="images/Car4.jpg" alt="Comfortable Vehicle">
                            <h3 data-i18n="safe-comfortable">Safe & Comfortable Vehicle</h3>
                            <p data-i18n="vehicle-desc">Clean and well-maintained vehicle ensuring a comfortable journey in Sri Lanka</p>
                            <ul class="vehicle-features">
                                <li><i class="fas fa-users"></i> <span data-i18n="passengers">Up to 4 passengers</span></li>
                                <li><i class="fas fa-suitcase"></i> <span data-i18n="luggage">Large luggage space</span></li>
                                <li><i class="fas fa-snowflake"></i> <span data-i18n="ac">Air conditioning</span></li>
                                <li><i class="fas fa-shield-alt"></i> <span data-i18n="safety">Safety features</span></li>
                            </ul>
                        </div>
                        
                        <div class="service-features">
                            <div class="feature-card">
                                <i class="fas fa-car"></i>
                                <h3 data-i18n="quality-vehicle">Quality Vehicle</h3>
                                <p data-i18n="quality-desc">Well-maintained vehicle ensuring your comfort and safety throughout the journey</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-id-card"></i>
                                <h3 data-i18n="expert-driver">Local Expert Driver</h3>
                                <p data-i18n="driver-desc">Professional English-speaking driver with extensive local knowledge</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-shield-alt"></i>
                                <h3 data-i18n="protection">Complete Protection</h3>
                                <p data-i18n="protection-desc">24/7 accompaniment and security throughout your journey</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-map-marked-alt"></i>
                                <h3 data-i18n="insider">Insider Knowledge</h3>
                                <p data-i18n="insider-desc">Access to hidden gems and authentic local experiences</p>
                            </div>
                        </div>
                        
                        <!-- 添加路线地图容器，初始状态为隐藏 -->
                        <div id="routeMapContainer" style="display: none; margin-top: 20px;">
                            <h3 style="margin-top: 10px; margin-bottom: 15px; color: #218838; font-size: 18px; border-bottom: 1px solid #ddd; padding-bottom: 10px;">
                                <i class="fas fa-route"></i> Your Journey Route
                            </h3>
                            <div id="routeMap" style="height: 350px; width: 100%; border-radius: 8px; border: 1px solid #ddd;"></div>
                        </div>
                    </div>

                    <!-- 右侧：预订表-->
                    <div class="booking-container">
                        <h2 data-i18n="book-your-journey">Book Your Journey</h2>
                        <p data-i18n="deposit-required">30% deposit required at time of booking</p>
                        
                        <div class="booking-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label data-i18n="service-type">Service Type</label>
                                    <select id="serviceType" data-i18n-placeholder="select-service">
                                        <option value="" data-i18n="select-service">Select service</option>
                                        <option value="airport">Airport Transfer</option>
                                        <option value="city">City Tour</option>
                                        <option value="custom">Custom Journey</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label data-i18n="date">Date</label>
                                    <input type="date" id="journeyDate">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label data-i18n="time">Time</label>
                                    <input type="time" id="journeyTime">
                                </div>
                                <div class="form-group">
                                    <label data-i18n="passengers">Passengers</label>
                                    <select id="passengerCount">
                                        <option value="1">1 Person</option>
                                        <option value="2">2 People</option>
                                        <option value="3">3 People</option>
                                        <option value="4+">4+ People</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group full-width">
                                    <label data-i18n="pickup-location">Pickup Location</label>
                                    <div class="location-input-container" style="display: flex; gap: 10px; margin-bottom: 10px;">
                                        <input type="text" id="pickupLocation" class="map-input" data-i18n-placeholder="enter-pickup" placeholder="Enter pickup location" style="flex: 1;" data-lat="" data-lng="">
                                        <button class="map-select-btn" id="pickupMapBtn" style="background-color: #4CAF50; color: white; border: none; padding: 10px 15px; cursor: pointer; border-radius: 4px; font-weight: bold;">
                                            <i class="fas fa-map-marker-alt"></i> Select on Map
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group full-width">
                                    <label data-i18n="destination">Destination</label>
                                    <div class="location-input-container" style="display: flex; gap: 10px; margin-bottom: 10px;">
                                        <input type="text" id="destinationLocation" class="map-input" data-i18n-placeholder="enter-destination" placeholder="Enter destination" style="flex: 1;" data-lat="" data-lng="">
                                        <button class="map-select-btn" id="destinationMapBtn" style="background-color: #4CAF50; color: white; border: none; padding: 10px 15px; cursor: pointer; border-radius: 4px; font-weight: bold;">
                                            <i class="fas fa-map-marker-alt"></i> Select on Map
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group full-width">
                                    <label data-i18n="special-requirements">Special Requirements</label>
                                    <textarea id="specialRequirements" data-i18n-placeholder="any-requirements" placeholder="Any special requirements?"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-buttons">
                                <button type="button" class="btn secondary" id="getQuoteBtn" data-i18n="get-quote">Get Quote</button>
                                <button type="button" class="btn primary" id="bookNowBtn" data-i18n="book-now">Book Now</button>
                            </div>
                            
                            <!-- 修改报价容器结构，移除显示限制 -->
                            <div id="quoteContainer" style="display: none; background-color: #f8f9fa; border-radius: 8px; padding: 16px; margin-top: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                <h3 style="margin-top: 0; color: #218838; border-bottom: 1px solid #ddd; padding-bottom: 10px; margin-bottom: 15px;">Journey Quote</h3>
                                <div class="quote-details">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <span>Distance:</span>
                                        <span id="quotedDistance">0 km</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <span>Vehicle Type:</span>
                                        <span id="quotedVehicle">Standard</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-weight: bold; font-size: 1.1em; margin-top: 15px; border-top: 1px dashed #ddd; padding-top: 10px;">
                                        <span>Estimated Total:</span>
                                        <span id="quotedFare">$0</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #d63031; font-weight: bold;">
                                        <span>Required Deposit (30%):</span>
                                        <span id="quotedDeposit">$0</span>
                                    </div>
                                    <p style="font-size: 0.9em; color: #666; font-style: italic; margin-top: 15px; margin-bottom: 15px;">The full amount is payable on the day of travel.</p>
                                    <!-- Rate info will be inserted here by JavaScript -->
                                </div>
                            </div>
                            
                            <div class="price-estimate"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Explore Section -->
        <section id="explore" class="section">
            <div class="container">
                <h2 class="section-title">Discover Sri Lanka</h2>
                <p class="section-subtitle">Explore the beauty and diversity of this tropical paradise</p>
                
                <!-- Gallery Filter Buttons -->
                <div class="gallery-filter">
                    <button class="gallery-filter-btn active" data-filter="all">All</button>
                    <button class="gallery-filter-btn" data-filter="scenery">Scenery</button>
                    <button class="gallery-filter-btn" data-filter="wildlife">Wildlife</button>
                    <button class="gallery-filter-btn" data-filter="culture">Culture</button>
                    <button class="gallery-filter-btn" data-filter="food">Food</button>
                    <button class="gallery-filter-btn" data-filter="beach">Beach</button>
                </div>
                
                <!-- Modern Gallery Layout -->
                <div class="modern-gallery-container">
                    <div class="featured-image-container">
                        <div class="featured-image">
                            <!-- Featured image will be displayed here -->
                        </div>
                        <div class="featured-caption">
                            <h3 class="featured-title"></h3>
                            <p class="featured-desc"></p>
                        </div>
                    </div>
                    
                    <div class="gallery-thumbnails">
                        <!-- Thumbnails will be generated here -->
                    </div>
                    
                </div>
                
                <!-- Hidden Original Gallery (for compatibility with admin) -->
                <div class="gallery-grid" style="position: absolute; left: -9999px; visibility: hidden;">
                    <div class="gallery-item" data-category="scenery">
                        <img src="images/nine-arch-bridge.jpg" alt="Nine Arch Bridge">
                        <div class="gallery-item-info">
                            <h3 class="gallery-item-title">Nine Arch Bridge</h3>
                            <p class="gallery-item-desc">Iconic railway bridge in Ella, surrounded by lush tea plantations</p>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-category="culture">
                        <img src="images/temple-tooth.jpg" alt="Temple of the Sacred Tooth Relic">
                        <div class="gallery-item-info">
                            <h3 class="gallery-item-title">Temple of the Sacred Tooth</h3>
                            <p class="gallery-item-desc">Ancient Buddhist temple in Kandy housing Buddha's sacred tooth relic</p>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-category="beach">
                        <img src="images/unawatuna-beach.jpg" alt="Unawatuna Beach">
                        <div class="gallery-item-info">
                            <h3 class="gallery-item-title">Unawatuna Beach</h3>
                            <p class="gallery-item-desc">Pristine golden beaches with crystal clear waters</p>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-category="wildlife">
                        <img src="images/yala-leopard.jpg" alt="Yala Leopard">
                        <div class="gallery-item-info">
                            <h3 class="gallery-item-title">Yala National Park</h3>
                            <p class="gallery-item-desc">Home to the highest density of leopards in the world</p>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-category="food">
                        <img src="images/sri-lankan-food.jpg" alt="Sri Lankan Cuisine">
                        <div class="gallery-item-info">
                            <h3 class="gallery-item-title">Local Cuisine</h3>
                            <p class="gallery-item-desc">Discover the rich flavors of authentic Sri Lankan dishes</p>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-category="scenery">
                        <img src="images/sigiriya.jpg" alt="Sigiriya Rock Fortress">
                        <div class="gallery-item-info">
                            <h3 class="gallery-item-title">Sigiriya Rock Fortress</h3>
                            <p class="gallery-item-desc">Ancient palace and fortress complex with stunning views</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials">
            <div class="container">
                <div class="section-header">
                    <div class="section-sup-title">Testimonials</div>
                    <h2>What Our Clients Say</h2>
                    <p>Real experiences shared by travelers who explored Sri Lanka with us</p>
                </div>
                
                <div class="testimonials-grid">
                    <!-- Testimonial 1 -->
                    <div class="testimonial-card" data-slide="0">
                        <div class="testimonial-content">
                            <div class="testimonial-quote-icon"><i class="fas fa-quote-left"></i></div>
                            <div class="testimonial-text">
                                Our tour guide was knowledgeable and passionate about Sri Lanka's history and culture. The accommodations were perfect, and the itinerary allowed us to experience both adventure and relaxation. Truly the trip of a lifetime!
                            </div>
                        </div>
                        <div class="testimonial-author">
                            <img src="images/testimonials/person1.jpg" alt="Sarah Johnson">
                            <div class="author-details">
                                <h4>Sarah Johnson</h4>
                                <p><i class="fas fa-map-marker-alt"></i> United Kingdom</p>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 2 -->
                    <div class="testimonial-card" data-slide="1">
                        <div class="testimonial-content">
                            <div class="testimonial-quote-icon"><i class="fas fa-quote-left"></i></div>
                            <div class="testimonial-text">
                                I was hesitant to book a solo trip, but Stay & Explore made me feel safe and welcome throughout my journey. The personalized itinerary matched my interests perfectly, and I discovered hidden gems I would have never found on my own.
                            </div>
                        </div>
                        <div class="testimonial-author">
                            <img src="images/testimonials/person2.jpg" alt="David Chen">
                            <div class="author-details">
                                <h4>David Chen</h4>
                                <p><i class="fas fa-map-marker-alt"></i> Canada</p>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 3 -->
                    <div class="testimonial-card" data-slide="2">
                        <div class="testimonial-content">
                            <div class="testimonial-quote-icon"><i class="fas fa-quote-left"></i></div>
                            <div class="testimonial-text">
                                As a family of four with young children, we were looking for a balanced trip that would be educational yet fun. Stay & Explore delivered beyond our expectations! The kids loved the wildlife safaris, and we appreciated the thoughtful planning that made everything stress-free.
                            </div>
                        </div>
                        <div class="testimonial-author">
                            <img src="images/testimonials/person3.jpg" alt="The Rodriguez Family">
                            <div class="author-details">
                                <h4>The Rodriguez Family</h4>
                                <p><i class="fas fa-map-marker-alt"></i> Australia</p>
                                <div class="rating">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Testimonial Slider Controls (Mobile Only) -->
                <div class="testimonial-controls-mobile">
                    <div class="testimonial-nav prev-testimonial">
                        <i class="fas fa-chevron-left"></i>
                    </div>
                    
                    <div class="testimonial-dots">
                        <div class="dot active" data-slide="0"></div>
                        <div class="dot" data-slide="1"></div>
                        <div class="dot" data-slide="2"></div>
                    </div>
                    
                    <div class="testimonial-nav next-testimonial">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rooms Section -->
        <section id="rooms" class="section">
            <div class="container">
                <h2 class="section-title">Luxurious Accommodations</h2>
                <div class="rooms-grid">
                    <div class="room-card">
                        <div class="room-image">
                            <!-- 图片通过 CSS background-image 设置 -->
                        </div>
                        <h3>Ocean View Suite</h3>
                        <p>Wake up to breathtaking views of the Indian Ocean</p>
                        <div class="room-details">
                            <span><i class="fas fa-bed"></i> King Bed</span>
                            <span><i class="fas fa-ruler-combined"></i> 55 m²</span>
                            <span><i class="fas fa-wifi"></i> Free WiFi</span>
                        </div>
                        <a href="#" class="btn-secondary">From $250/night</a>
                    </div>
                    <div class="room-card">
                        <div class="room-image">
                            <!-- 图片通过 CSS background-image 设置 -->
                        </div>
                        <h3>Tropical Garden Suite</h3>
                        <p>Immerse yourself in lush tropical gardens</p>
                        <div class="room-details">
                            <span><i class="fas fa-bed"></i> Queen Bed</span>
                            <span><i class="fas fa-ruler-combined"></i> 45 m²</span>
                            <span><i class="fas fa-wifi"></i> Free WiFi</span>
                        </div>
                        <a href="#" class="btn-secondary">From $180/night</a>
                    </div>
                    <div class="room-card">
                        <div class="room-image">
                            <!-- 图片通过 CSS background-image 设置 -->
                        </div>
                        <h3>Private Pool Villa</h3>
                        <p>Ultimate luxury with your own infinity pool</p>
                        <div class="room-details">
                            <span><i class="fas fa-bed"></i> King Bed</span>
                            <span><i class="fas fa-ruler-combined"></i> 120 m²</span>
                            <span><i class="fas fa-wifi"></i> Free WiFi</span>
                        </div>
                        <a href="#" class="btn-secondary">From $450/night</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="section">
            <div class="container">
                <h2 class="section-title">Contact Us</h2>
                <div class="contact-info">
                    <div class="contact-details">
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <p>+94 77 760 5921</p>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <p>info@srilankastayexplore.com</p>
                        </div>
                        <div class="contact-item">
                            <i class="fab fa-whatsapp"></i>
                            <p>WhatsApp: +94 77 760 5921</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section 后面添加 -->
        <div id="feedbackModal" class="map-modal">
            <div class="map-modal-content">
                <div class="map-modal-header">
                    <h3>Share Your Experience</h3>
                    <button class="close-map-btn close-modal" aria-label="Close">&times;</button>
                </div>
                <div class="map-modal-body">
                <form id="feedbackForm">
                        <div class="form-group">
                            <label for="feedbackName">Name</label>
                            <input type="text" id="feedbackName" placeholder="Your name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="feedbackCountry">Country</label>
                            <input type="text" id="feedbackCountry" placeholder="Your country" required>
                    </div>
                    
                        <div class="form-group">
                        <label>How was your experience?</label>
                            <div class="rating">
                            <input type="radio" id="star5" name="rating" value="5" checked>
                            <label for="star5" title="5 stars"><i class="fas fa-star"></i></label>
                            
                            <input type="radio" id="star4" name="rating" value="4">
                            <label for="star4" title="4 stars"><i class="fas fa-star"></i></label>
                            
                            <input type="radio" id="star3" name="rating" value="3">
                            <label for="star3" title="3 stars"><i class="fas fa-star"></i></label>
                            
                            <input type="radio" id="star2" name="rating" value="2">
                            <label for="star2" title="2 stars"><i class="fas fa-star"></i></label>
                            
                            <input type="radio" id="star1" name="rating" value="1">
                            <label for="star1" title="1 star"><i class="fas fa-star"></i></label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="feedbackText">Your Feedback</label>
                        <textarea id="feedbackText" rows="4" placeholder="Tell us about your experience..." required></textarea>
                    </div>
                    
                    <button type="submit" class="btn-primary feedback-submit">
                        <i class="fas fa-paper-plane"></i> Submit Feedback
                    </button>
                </form>
                </div>
            </div>
        </div>

        <!-- Adding feedback button outside of any section -->
        <button id="showFeedback" class="feedback-btn">
            <i class="fas fa-comment-alt"></i>
            <span>Give Feedback</span>
        </button>
    </main>

    <!-- AI Assistant -->
    <div id="ai-assistant" class="ai-assistant collapsed">
        <div class="ai-header">
            <span class="ai-title">
                <i class="fas fa-robot"></i>
                <span>Travel Assistant</span>
            </span>
            <button id="toggleAI" class="toggle-ai">
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
        <div class="ai-content">
            <div id="chatMessages" class="chat-messages">
                <!-- Default welcome message will be added by JS -->
            </div>
            <div class="chat-input">
                <textarea id="userInput" 
                          placeholder="Ask me anything about Sri Lanka..." 
                          rows="1"
                          maxlength="500"></textarea>
                <button id="sendMessage" class="send-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div id="aiStatus" class="ai-status">Connecting to AI...</div>
        </div>
    </div>

    <!-- 悬浮按钮 -->
    <button id="showAI" class="show-ai-btn">
        <i class="fas fa-robot"></i>
        <span>Need Help?</span>
    </button>

    <!-- 添加底部空白元素，防止内容被底部按钮遮挡 -->
    <div class="bottom-space" style="height: 70px; width: 100%;"></div>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="./images/ranga_bandara_logo_v2.png" alt="Sri Lanka Stay & Explore Logo" width="80">
                    <h3>Sri Lanka Stay & Explore</h3>
                </div>
                <div class="footer-social">
                    <a href="https://facebook.com/" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://instagram.com/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://twitter.com/" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="https://youtube.com/" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-copyright">
                <p>&copy; <span id="current-year">2024</span> Sri Lanka Stay & Explore. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <script>
        // 自动更新页脚的年
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>

    <!-- Map modal for selecting locations -->
    <div id="mapModal" class="map-modal">
        <div class="map-modal-content">
            <div class="map-modal-header">
                <h3 id="mapModalTitle" data-i18n="select-pickup-location">Select Pickup Location</h3>
                <button id="closeMapModal" class="close-map-btn" aria-label="Close">&times;</button>
            </div>
            <div class="map-modal-body">
                <div class="map-search-container">
                    <input type="text" id="mapSearchInput" data-i18n-placeholder="search-location" placeholder="Search for a location in Sri Lanka">
                    <button id="mapSearchBtn" aria-label="Search"><i class="fas fa-search"></i></button>
                </div>
                <div id="modalMap" style="height: 400px; width: 100%; display: block;"></div>
                <p class="map-helper-text">
                    <i class="fas fa-info-circle"></i> 
                    <span data-i18n="location-click-tip">Click on the map to select a location or use the search box above to find a specific place in Sri Lanka.</span>
                </p>
            </div>
            <div class="map-modal-footer">
                <button id="confirmLocationBtn" class="confirm-location-btn">
                    <i class="fas fa-check"></i> <span data-i18n="confirm-location">Confirm Location</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Preload core modules immediately
        
        // Create a function to load scripts in order
        function loadScriptSequentially(scripts, callback) {
            let index = 0;
            
            function loadNext() {
                if (index >= scripts.length) {
                    if (callback) callback();
                    return;
                }
                
                const scriptInfo = scripts[index++];
                const script = document.createElement('script');
                script.src = scriptInfo.src;
                
                if (scriptInfo.defer) script.defer = true;
                if (scriptInfo.async) script.async = true;
                
                script.onload = function() {
                    loadNext();
                };
                
                script.onerror = function(e) {
                    console.error(`Failed to load script: ${scriptInfo.src}`, e);
                    // Continue loading other scripts even if one fails
                    loadNext();
                };
                
                document.head.appendChild(script);
            }
            
            loadNext();
        }
        
        // Define core scripts that must load first
        const coreScripts = [
            { src: 'js/translations.js' },
            { src: 'js/main.js' }
        ];
        
        // Define secondary scripts that can load after core
        const secondaryScripts = [
            { src: 'js/indexed-db.js' },
            { src: 'js/image-manager.js' },
            { src: 'js/simple-gallery.js' },
            { src: 'js/script.js' }
        ];
        
        // Define scripts that should load after page render
        const deferredScripts = [
            { src: 'js/analytics.js', defer: true },
            { src: 'js/user-auth.js', defer: true },
            { src: 'js/my-bookings.js', defer: true },
            { src: 'js/ai-assistant.js', defer: true },
            { src: 'js/feedback.js', defer: true },
            { src: 'js/testimonials.js', defer: true },
            { src: 'js/rooms.js', defer: true },
            { src: 'js/mobile-optimizations.js', defer: true }
        ];
        
        // Load Leaflet separately since it's a critical dependency
        function loadLeaflet(callback) {
            const leafletCSS = document.createElement('link');
            leafletCSS.rel = 'stylesheet';
            leafletCSS.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
            leafletCSS.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';
            leafletCSS.crossOrigin = '';
            document.head.appendChild(leafletCSS);
            
            const leafletScript = document.createElement('script');
            leafletScript.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
            leafletScript.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
            leafletScript.crossOrigin = '';
            
            leafletScript.onload = function() {
                
                // Load map and booking scripts after Leaflet
                loadScriptSequentially([
                    { src: 'js/map.js' },
                    { src: 'js/booking.js' }
                ], callback);
            };
            
            leafletScript.onerror = function(e) {
                console.error('Failed to load Leaflet', e);
                // Continue anyway
                if (callback) callback();
            };
            
            document.head.appendChild(leafletScript);
        }
        
        // Start the script loading process
        loadScriptSequentially(coreScripts, function() {
            // Core scripts loaded, now load secondary ones
            loadScriptSequentially(secondaryScripts, function() {
                // Load Leaflet and its dependencies
                loadLeaflet(function() {
                    // Finally load deferred scripts
                    loadScriptSequentially(deferredScripts);
                });
            });
        });
    </script>

    <!-- AOS Animations -->
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        // Initialize AOS after window load to ensure it doesn't block rendering
        window.addEventListener('load', function() {
            // Short timeout to ensure other critical functions have completed
            setTimeout(function() {
                try {
                    AOS.init({
                        duration: 800,
                        offset: 120,
                        once: true,
                        disable: window.innerWidth < 768 // Disable on mobile for performance
                    });
                } catch (e) {
                    console.error('AOS initialization error:', e);
                }
            }, 1000);
        });
    </script>
    
    <!-- Mobile Optimizations -->
    <script src="js/mobile-optimizations.js"></script>

    <!-- 更新位置输入容器，使移动端更友好 -->
    <script>
        // 更新位置输入按钮文字
        document.addEventListener('DOMContentLoaded', function() {
            // 添加数据属性到按钮
            const pickupMapBtn = document.getElementById('pickupMapBtn');
            const destinationMapBtn = document.getElementById('destinationMapBtn');
            
            if (pickupMapBtn) {
                pickupMapBtn.setAttribute('data-i18n', 'select-on-map');
            }
            
            if (destinationMapBtn) {
                destinationMapBtn.setAttribute('data-i18n', 'select-on-map');
            }
            
            // 为输入框添加提示文本
            const pickupInput = document.getElementById('pickupLocation');
            const destinationInput = document.getElementById('destinationLocation');
            
            if (pickupInput) {
                pickupInput.setAttribute('data-i18n-placeholder', 'enter-pickup');
            }
            
            if (destinationInput) {
                destinationInput.setAttribute('data-i18n-placeholder', 'enter-destination');
            }
        });
    </script>
    
    <!-- Scroll Fix Script -->
    <script>
        // Add scroll fix when page loaded
        window.addEventListener('load', function() {
            // Enable scrolling
            document.body.style.overflow = 'auto';
            document.documentElement.style.overflow = 'auto';
            document.body.classList.add('force-scroll');
            
            console.log('Scroll fix applied on window load');
            
            // Check if page is tall enough to be scrolled
            const pageHeight = Math.max(
                document.body.scrollHeight,
                document.documentElement.scrollHeight,
                document.body.offsetHeight,
                document.documentElement.offsetHeight,
                document.body.clientHeight,
                document.documentElement.clientHeight
            );
            
            if (pageHeight > window.innerHeight) {
                console.log('Page content is taller than viewport, should be scrollable');
            } else {
                console.log('Page content fits in viewport, no scrolling needed');
            }
        });
        
        // Check periodically if scrolling is disabled and re-enable it
        setInterval(function() {
            if (document.body.style.overflow === 'hidden' || getComputedStyle(document.body).overflow === 'hidden') {
                document.body.style.overflow = 'auto';
                console.log('Periodic check: Re-enabled scrolling');
            }
            
            if (document.documentElement.style.position === 'fixed') {
                document.documentElement.style.position = 'relative';
                console.log('Periodic check: Fixed position on HTML tag removed');
            }
        }, 2000);
    </script>
</body>
</html> 
